<body>


  <div class="container-fluid mt-4">
    <div class="row">
      <div class="col-lg-3 col-md-4  conte">
        <div class="categories-sidebar">
          <!-- Sidebar Title -->
          <h5 class="sidebar-title" [class.active]="!activeCategory" (click)="filterByCategory(null)">
            All Categories
          </h5>

          <!-- Categories List -->
          <ul class="categories-list">
            <li *ngFor="let category of categories ; let last = last" class="category-item"
              [class.active]="activeCategory === category._id?.toString()" [class.no-border]="last"
              (click)="filterByCategory(category._id?.toString() ?? null)">
              <img [src]="category.image.startsWith('http') ? category.image : 'assets/' + category.image"
                alt="{{ category.name }}" class="category-image" />
              {{ category.name }}
            </li>
          </ul>
        </div>
        <img src="../../../assets/gAMING.jpg" class="sidebar-image" alt="">
      </div>


      <!-- Products Cards -->
      <div class="col-lg-9 col-md-8">
        <!-- filter product par price -->
        <div class="d-flex justify-content-between align-items-center mb-3 ">
          <!--search-->
          
        <!-- Search Input Field -->
        <div class="input-group w-50">
          <span class="input-group-text"(click)="filterProductsByName()">
            <i class="bi bi-search"></i> <!-- Search Icon -->
          </span>
          <input
            type="text"
            class="form-control"
            placeholder="Search by product name..."
            [(ngModel)]="searchTerm" 
            (keyup.enter)="filterProductsByName()"
          />
        </div>
      
          
          <select class="form-select w-auto stew" (change)="sortProductsByPrice($event) ">
            <option value="" disabled selected>Sort by Price</option>
            <option value="lowToHigh">Price: Low to High</option>
            <option value="highToLow">Price: High to Low</option>
          </select>
        </div>
        <!-- Product Card -->
        <div class="row g-3">
          <div class="col-lg-3 col-md-4 col-sm-6" *ngFor="let prod of paginatedProducts">
            <div class="card h-100 text-center">
              <a [routerLink]="['/product-detail', prod._id]" style="text-decoration: none;">
                <div class="discount-badge" *ngIf="prod.promo > 0">
                  -{{ prod.promo }},000 TND
                </div>
                <div class="image-container" [ngClass]="{'has-hover-image': prod.images[1]}">
                  <img
                    [src]="prod.images[0].startsWith('http') ? prod.images[0] : 'assets/' + prod.images[0]"
                    class="card-img-top product-image default-image"
                    alt="{{ prod.name }}"
                  />
                  <img
                    *ngIf="prod.images[1]"
                    [src]="prod.images[1].startsWith('http') ? prod.images[1] : 'assets/' + prod.images[1]"
                    class="card-img-top product-image hover-image"
                    alt="{{ prod.name }}"
                  />
                </div>
              </a>
                <div class="card-body">
                  <h5 class="card-title" [routerLink]="['/product-detail', prod._id]" >{{ prod.name }}</h5>
                  <div class="card-price text-center">
                    <span class="current-price" [routerLink]="['/product-detail', prod._id]">{{ prod.Price - prod.promo }},000 TND</span><br />
                    <span class="original-price" *ngIf="prod.promo > 0" [routerLink]="['/product-detail', prod._id]">{{ prod.Price }},000 TND</span>
                  </div>
                  <div class="d-flex justify-content-end">
                    <button class="btn btn-outline-primary" (click)="addToCart(prod)">
                      <i class="bi bi-cart"></i>
                    </button>
                  </div>
                </div>
            </div>
          </div>
          
        </div>

        <!-- Custom Pagination -->
        <nav aria-label="Page navigation" class="custom-pagination">
          <ul class="pagination justify-content-center">
            <!-- Previous Button -->
            <li class="page-item" [class.disabled]="pageIndex === 0" (click)="goToPage(pageIndex - 1)">
              <a class="page-link" aria-label="Previous">&laquo;</a>
            </li>

            <!-- Page Numbers -->
            <li *ngFor="let page of pages; let i = index" class="page-item" [class.active]="i === pageIndex"
              (click)="goToPage(i)">
              <a class="page-link">{{ i + 1 }}</a>
            </li>
            <!-- Next Button -->
            <li class="page-item" [class.disabled]="pageIndex === pages.length - 1" (click)="goToPage(pageIndex + 1)">
              <a class="page-link" aria-label="Next">&raquo;</a>
            </li>
          </ul>
        </nav>
      </div>





    </div>
  </div>
  <div style="padding-bottom: 30px;"></div>
</body>